<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hatırladığım Sen</title>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f4f4f9;
      min-height: 100vh;
      color: #333;
    }
    .page {
      display: none;
      min-height: 100vh;
      width: 100%;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
      text-align: center;
    }
    .page.active {
      display: flex;
    }
    .content {
      max-width: 600px;
      padding: 20px;
      z-index: 1;
    }
    h1 {
      font-size: 2em;
      color: #2c3e50;
      margin: 0;
    }
    p {
      font-size: 1.1em;
      line-height: 1.6;
      margin: 20px 0;
    }
    .buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
      z-index: 10;
      position: relative;
      pointer-events: auto;
    }
    button {
      padding: 10px 20px;
      font-size: 1em;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
      z-index: 10;
      background-color: #3498db;
      color: white;
      pointer-events: auto;
    }
    button:hover {
      opacity: 0.9;
    }
    #page1 .header-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
      z-index: 1;
    }
    #page1 .gif {
      width: 60px;
      height: 60px;
      object-fit: contain;
      background: transparent;
      transition: transform 0.3s ease;
      z-index: 1;
    }
    #page1 .gif:hover {
      transform: scale(1.1);
    }
    #page2 {
      background: url('https://cdn03.ciceksepeti.com/cicek/at4264-1/L/at4264-1-8dcdbb4e53b9817-89598a7c.jpg') no-repeat center center fixed;
      background-size: cover;
      color: white;
    }
    #page2 .content {
      background: rgba(0, 0, 0, 0.7);
      border-radius: 10px;
    }
    #page3 {
      position: relative;
      overflow: hidden;
    }
    #page3 video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 0;
    }
    #page3 .content {
      background: rgba(255, 255, 255, 0.8);
      border-radius: 10px;
    }
    #page7 .red-button {
      background-color: #e74c3c;
      color: white;
      position: absolute;
      transition: all 0.2s ease;
      z-index: 110;
    }
    #page7 .blue-button {
      background-color: #3498db;
      color: white;
      z-index: 10;
    }
    #page7 .game-message {
      margin-top: 20px;
      font-style: italic;
      color: #2c3e50;
      z-index: 1;
    }
    #page7 .text-input-container {
      margin-top: 20px;
      display: none;
      flex-direction: column;
      gap: 10px;
    }
    #page7 .text-input-container input {
      padding: 10px;
      font-size: 1em;
      border-radius: 5px;
      border: 1px solid #ccc;
      width: 200px;
    }
    #page7 .user-text {
      margin-top: 20px;
      font-size: 1em;
      color: #2c3e50;
      z-index: 1;
    }
    audio {
      display: none;
    }
    @media (max-width: 600px) {
      #page1 .header-container {
        flex-direction: column;
        gap: 10px;
      }
      #page1 .gif {
        width: 50px;
        height: 50px;
      }
      .content {
        max-width: 90%;
        padding: 15px;
      }
      .buttons {
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>
</head>
<body>
  <div id="page1" class="page active">
    <audio id="audio1" autoplay muted>
      <source src="song1.mp3" type="audio/mpeg">
    </audio>
    <div class="content">
      <div class="header-container">
        <img class="gif" src="https://media.giphy.com/media/tFSqMSMnzPRTAdvKyr/giphy.gif" alt="Dans Eden GIF">
        <h1>Hatırladığım Sen</h1>
        <img class="gif" src="https://media.giphy.com/media/zINs6k7lwfawSbLOIc/giphy.gif" alt="Dans Eden GIF">
      </div>
      <p>Bu, sana küçük bir jest bir tebrik bir anı Mezuniyetin şerefine sadece içimden geldiği için yaptım. Hiçbir beklenti olmadan sadece güzel bir anıyı paylaşmak için. Hayatında yüksek ihtimalle birisi var ama olsun. Neyse bu sadece senin için bir tebessüm hediyesi. Hazır mısın başlıyalım.</p>
      <div class="buttons">
        <button onclick="showPage('page2')">Hadi Başlayalım</button>
        <button onclick="showPage('page2')">Çiçek mi ? Unutmadan</button>
      </div>
    </div>
  </div>

  <div id="page2" class="page">
    <audio id="audio2" src="song2.mp3" preload="auto"></audio>
    <div class="content">
      <img class="gif" src="https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExdWF4M2xvbjhvdnY5Ynk4Y3k2NWpkOWNlNTU0Y3hzZ245cmI3YXBnaiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/3ohhwfAa9rbXaZe86c/giphy.gif" alt="Dans Eden GIF" style="width: 80px; height: 80px;">
      <h1>Mezuniyet Çiçeğin</h1>
      <p>Mezuniyetin için sana bir buket çiçek almak isterdim güllerle dolu tam senin sevdiğin gibi(belki alan olmuştur) O yüzden buradan sana sanal bir buket hediye ediyorum. Bu özel gününde başarılarını kutluyorum!</p>
      <div class="buttons">
        <button onclick="showPage('page3')">Devam Edelim</button>
        <button onclick="showPage('page3')">Bir Anıya Gidelim</button>
      </div>
    </div>
  </div>

  <div id="page3" class="page">
    <video id="backgroundVideo" src="video.mp4" autoplay loop muted playsinline></video>
    <audio id="audio3" src="song3.mp3" preload="auto"></audio>
    <div class="content">
      <h1>Bir Küçük Anı</h1>
      <p>Arkadaki resmi hatırlıyor musun ? valla galeride dolaşırken buldum silmeden önce ekliyim dedim çiçek güzelmiş ha lkmgksdlfg</p>
      <div class="buttons">
        <button onclick="showPage('page4')">İlerleyelim</button>
        <button onclick="showPage('page4')">Mezuniyete Doğru</button>
      </div>
    </div>
  </div>

  <div id="page4" class="page">
    <audio id="audio4" src="song4.mp3" preload="auto"></audio>
    <div class="content">
      <img class="gif" src="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExYnFvZ29qejd3NHV5enFhMmJqdXkzcXd5NWp4ZHRpMGkwamV6ZmJzbiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/EN07uCL8sMNj26GO2g/giphy.gif" alt="Dans Eden GIF" style="width: 80px; height: 80px;">
      <h1>Mezuniyet Tebrikleri</h1>
      <p>Mezuniyetin, hayatındaki en güzel dönüm noktalarından biri. Belki yan yana değiliz, ama bu başarını uzaktan da olsa kutluyorum. Umarım her şey hayallerindeki gibi olur, ve bu gün sana bir ömür tebessüm getirir.</p>
      <div class="buttons">
        <button onclick="showPage('page5')">Devam Edelim</button>
        <button onclick="showPage('page5')">Geleceğe Bakalım</button>
      </div>
    </div>
  </div>

  <div id="page5" class="page">
    <audio id="audio5" src="song5.mp3" preload="auto"></audio>
    <div class="content">
      <h1>Ayrı Yollar, Güzel Dilekler</h1>
      <p>Hayat bizi farklı yollara götürdü ama bu geçirdiğimiz güzel anıları silmiyor İkimiz de yeni hikayeler yazıyoruz yeni anılar biriktiriyoruz Sana bu yeni başlangıçlarda bol şans ve mutluluk diliyorum Kendi yolumda ben de ilerliyorum ve bu iyi hissettiriyor</p>
      <div class="buttons">
        <button onclick="showPage('page6')">Son Bir Sayfa</button>
        <button onclick="showPage('page6')">Bitirelim</button>
      </div>
    </div>
  </div>

  <div id="page6" class="page">
    <audio id="audio6" src="song6.mp3" preload="auto"></audio>
    <div class="content">
      <h1>Son Bir Not</h1>
      <p>Sen mezuniyetimde yazmamış olsan da bu site mezuniyetin için yapıldı Sadece içimden gelen bir jest. Belki gerçekten görüştüğün birisi var (baya dinine bağlandın) belki artık hiç hatırlamıyorsun ama olsun yüzünde ufak da olsa tebessüm oluşsun yeterli. Hayatta umarım her zaman mutlu olursun umarım beni arayacak beni düşünecek hiçbir anın olmaz.</p>
      <div class="buttons">
        <button onclick="showPage('page1')">Başa Dön</button>
        <button onclick="showPage('page7')">Bir Oyun Oynayalım</button>
      </div>
    </div>
  </div>

  <div id="page7" class="page">
    <audio id="audio7" src="song7.mp3" preload="auto"></audio>
    <div class="content">
      <img class="gif" src="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExZmdhM296MnFyeTQyd3pjZHcxZnViajVjdW1mNGwwNnBvbGNtMzdxZiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/akj83ukXAU4sSDglpU/giphy.gif" alt="Dans Eden GIF" style="width: 80px; height: 80px;">
      <h1>Kırmızı Butona Basarsan(basamazsın)</h1>
      <p>Kırmızı butona basarsan, geçmişe küçük bir selam gönderirsin. Mavi butona basarsan, geleceğe bir adım atarsın. Sence ne yapmalısın?</p>
      <div class="buttons">
        <button id="redButton" class="red-button">Kırmızı</button>
        <button id="blueButton" class="blue-button">Mavi</button>
      </div>
      <p id="gameMessage" class="game-message"></p>
      <div class="buttons">
        <button id="writeButton">Yazı Yaz</button>
        <button onclick="showPage('page1')">Başa Dön</button>
      </div>
      <div id="textInputContainer" class="text-input-container">
        <input type="text" id="userInput" placeholder="Mesajınızı yazın...">
        <button id="submitText">Gönder</button>
      </div>
      <p id="userText" class="user-text"></p>
    </div>
  </div>

  <script>
    // Firebase Yapılandırması
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY", // Firebase Console'dan alın
      authDomain: "mezuniyetsitesitakip.firebaseapp.com",
      databaseURL: "https://mezuniyetsitesitakip-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "mezuniyetsitesitakip",
      storageBucket: "mezuniyetsitesitakip.appspot.com",
      messagingSenderId: "YOUR_MESSAGING_SENDER_ID", // Firebase Console'dan alın
      appId: "YOUR_APP_ID", // Firebase Console'dan alın
      measurementId: "YOUR_MEASUREMENT_ID" // Analytics için, Firebase Console'dan alın
    };

    // Firebase'i başlat
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    const auth = firebase.auth();
    const analytics = firebase.analytics();

    // Sayfa yüklendiğinde anonim oturum aç ve Analytics olaylarını kaydet
    document.addEventListener('DOMContentLoaded', function() {
      // Anonim oturum açma
      auth.signInAnonymously().then((userCredential) => {
        const userId = userCredential.user.uid;
        // Kullanıcı girişini kaydet
        database.ref('users/' + userId).set({
          timestamp: new Date().toISOString()
        }).catch(error => console.error('Kullanıcı kaydetme hatası:', error));
        // Analytics: Sayfa ziyareti
        analytics.logEvent('page_view', { page_title: 'Hatırladığım Sen' });
      }).catch(error => console.error('Anonim oturum açma hatası:', error));

      // Ses oynatma
      const audio = document.getElementById('audio1');
      setTimeout(() => {
        audio.muted = false;
        audio.play().catch(e => {
          console.log("Otomatik oynatma engellendi, kullanıcı etkileşimi bekleniyor...");
          document.body.addEventListener('click', function() {
            audio.play().catch(e => console.log("Tıklama sonrası oynatma hatası:", e));
          }, { once: true });
        });
      }, 1000);

      // Yazı yazma özelliği
      const writeButton = document.getElementById('writeButton');
      const textInputContainer = document.getElementById('textInputContainer');
      const userInput = document.getElementById('userInput');
      const submitText = document.getElementById('submitText');
      const userText = document.getElementById('userText');

      if (writeButton && textInputContainer && userInput && submitText && userText) {
        writeButton.addEventListener('click', () => {
          textInputContainer.style.display = 'flex';
          // Analytics: Yazı yaz butonuna tıklama
          analytics.logEvent('write_button_click');
        });

        submitText.addEventListener('click', () => {
          const message = userInput.value.trim();
          if (message) {
            const userId = auth.currentUser ? auth.currentUser.uid : 'anonymous';
            // Mesajı Firebase'e kaydet
            database.ref('messages').push({
              text: message,
              timestamp: new Date().toISOString(),
              userId: userId
            }).then(() => {
              userText.textContent = `Yazılan mesaj: ${message}`;
              userInput.value = '';
              textInputContainer.style.display = 'none';
              // Analytics: Mesaj gönderme
              analytics.logEvent('message_sent');
            }).catch(error => {
              console.error('Mesaj kaydetme hatası:', error);
              userText.textContent = 'Mesaj kaydedilemedi, lütfen tekrar deneyin.';
            });
          }
        });
      }

      // Kırmızı buton hareketi
      const redButton = document.getElementById('redButton');
      const blueButton = document.getElementById('blueButton');
      const gameMessage = document.getElementById('gameMessage');

      const blueMessages = [
        'Yeni başlangıçlar seni bekliyor! Mezuniyetinle her şey mümkün.',
        'Geleceğe cesur adımlar at, her an yeni bir fırsat!',
        'Hayallerin peşinden koş, bu sadece bir başlangıç!',
        'Dünya seninle daha güzel, ilerle ve parlamaya devam et!'
      ];

      if (redButton && blueButton) {
        const getSafePosition = () => {
          const container = redButton.parentElement.parentElement;
          const blueRect = blueButton.getBoundingClientRect();
          const containerRect = container.getBoundingClientRect();
          const buffer = 30;

          let newX, newY;
          let attempts = 0;
          const maxAttempts = 10;

          do {
            newX = Math.random() * (containerRect.width - redButton.offsetWidth - 20);
            newY = Math.random() * (containerRect.height - redButton.offsetHeight - 20);
            attempts++;
          } while (
            attempts < maxAttempts &&
            newX >= blueRect.left - containerRect.left - buffer &&
            newX <= blueRect.right - containerRect.left + buffer &&
            newY >= blueRect.top - containerRect.top - buffer &&
            newY <= blueRect.bottom - containerRect.top + buffer
          );

          if (attempts >= maxAttempts) {
            newX = blueRect.left - containerRect.left < containerRect.width / 2
              ? blueRect.right - containerRect.left + buffer
              : blueRect.left - containerRect.left - redButton.offsetWidth - buffer;
            newY = blueRect.top - containerRect.top + buffer;
          }

          return { x: newX, y: newY };
        };

        const moveRedButton = () => {
          const { x, y } = getSafePosition();
          redButton.style.position = 'absolute';
          redButton.style.left = `${x}px`;
          redButton.style.top = `${y}px`;
          if (gameMessage) {
            gameMessage.textContent = 'Kırmızı buton biraz inatçı gibi değil mi ? sen boşa vakit kaybetme maviye bas konuştuğun kişiye yaz';
          }
        };

        redButton.addEventListener('mouseover', moveRedButton);
        redButton.addEventListener('touchstart', (e) => {
          e.preventDefault();
          moveRedButton();
        });
      }

      if (blueButton && gameMessage) {
        blueButton.addEventListener('click', () => {
          const randomMessage = blueMessages[Math.floor(Math.random() * blueMessages.length)];
          gameMessage.textContent = randomMessage;
          // Analytics: Mavi butona tıklama
          analytics.logEvent('blue_button_click');
        });
      }
    });

    function showPage(pageId) {
      console.log(`Switching to page: ${pageId}`);
      document.querySelectorAll('audio').forEach(audio => {
        audio.pause();
        audio.currentTime = 0;
      });
      document.querySelectorAll('video').forEach(video => {
        video.pause();
        video.currentTime = 0;
      });

      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });

      const newPage = document.getElementById(pageId);
      if (newPage) {
        newPage.classList.add('active');

        const newAudio = newPage.querySelector('audio');
        if (newAudio) {
          newAudio.play().catch(error => console.log('Ses oynatma hatası:', error));
        }
        const newVideo = newPage.querySelector('video');
        if (newVideo) {
          newVideo.play().catch(error => console.log('Video oynatma hatası:', error));
        }
      }

      if (pageId === 'page7') {
        const redButton = document.getElementById('redButton');
        if (redButton) {
          redButton.style.position = '';
          redButton.style.left = '';
          redButton.style.top = '';
        }
        const gameMessage = document.getElementById('gameMessage');
        if (gameMessage) {
          gameMessage.textContent = '';
        }
        const textInputContainer = document.getElementById('textInputContainer');
        if (textInputContainer) {
          textInputContainer.style.display = 'none';
        }
        const userText = document.getElementById('userText');
        if (userText) {
          userText.textContent = '';
        }
      }
    }
  </script>
</body>
</html>
